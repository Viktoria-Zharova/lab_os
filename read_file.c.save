#include <stdio.h>
#include <stdlib.h>

int main(int argc, char *argv[]) {
    // Проверяем количество аргументов командной строки
    if (argc < 2 || argc > 3) {
        fprintf(stderr, "Использование: %s <имя_файла> [N]\n", argv[0]);
        return 1;  // Завершаем программу с ошибкой, если аргументов недостаточно
    }

    // Открываем файл для чтения
    FILE *file = fopen(argv[1], "r");
    if (file == NULL) {  // Если не удалось открыть файл, выводим ошибку
        perror("Ошибка открытия файла");
        return 1;
    }

    // Определяем количество строк для вывода за раз
    int N = 0;  // По умолчанию вывод сплошным текстом
    if (argc == 3) {
        N = atoi(argv[2]);  // Преобразуем второй аргумент в число
    }

    int line_count = 0;  // Счётчик строк
    char c;
    // Читаем файл посимвольно
    while ((c = fgetc(file)) != EOF) {
        putchar(c);  // Выводим символ на экран

        // Если встретился символ новой строки, увеличиваем счётчик строк
        if (c == '\n') {
            line_count++;
        }

        // Если N > 0 и line_count достиг N, ожидаем нажатия клавиши
        if (N > 0 && line_count == N) {
            printf("Нажмите любую клавишу для продолжения...\n");
            getchar();  // Ожидаем нажатия клавиши
            line_count = 0;  // Сбрасываем счётчик строк
        }
    }

    // Закрываем файл
    fclose(file);
    return 0;  // Завершаем программу
}
